'use client';

import { useState } from 'react';

type Gorev = {
  id: string;
    baslik: string;
      aciklama: string;
        tamamlandi: boolean;
          kategori: string;
            oncelik: 'Düşük' | 'Orta' | 'Yüksek';
              tarih: string;
              };

              const baslangicGorevler: Gorev[] = [
                {
                    id: '1',
                        baslik: 'Kitap oku',
                            aciklama: 'Günde 10 sayfa',
                                tamamlandi: false,
                                    kategori: 'Kişisel',
                                        oncelik: 'Orta',
                                            tarih: '2025-06-01',
                                              },
                                                {
                                                    id: '2',
                                                        baslik: 'Yürüyüş yap',
                                                            aciklama: '30 dakika',
                                                                tamamlandi: false,
                                                                    kategori: 'Sağlık',
                                                                        oncelik: 'Yüksek',
                                                                            tarih: '2025-05-23',
                                                                              },
                                                                              ];

                                                                              export default function Gorevler() {
                                                                                const [gorevler, setGorevler] = useState<Gorev[]>(baslangicGorevler);
                                                                                  const [duzenlenenId, setDuzenlenenId] = useState<string | null>(null);
                                                                                    const [duzenlenenBaslik, setDuzenlenenBaslik] = useState('');
                                                                                      const [duzenlenenAciklama, setDuzenlenenAciklama] = useState('');
                                                                                        const [duzenlenenKategori, setDuzenlenenKategori] = useState('');
                                                                                          const [duzenlenenOncelik, setDuzenlenenOncelik] = useState<'Düşük' | 'Orta' | 'Yüksek'>('Orta');
                                                                                            const [duzenlenenTarih, setDuzenlenenTarih] = useState('');

                                                                                              const gorevDurumDegistir = (id: string) => {
                                                                                                  setGorevler((prev) =>
                                                                                                        prev.map((g) =>
                                                                                                                g.id === id ? { ...g, tamamlandi: !g.tamamlandi } : g
                                                                                                                      )
                                                                                                                          );
                                                                                                                            };

                                                                                                                              const gorevSil = (id: string) => {
                                                                                                                                  setGorevler((prev) => prev.filter((g) => g.id !== id));
                                                                                                                                    };

                                                                                                                                      const guncelle = (id: string) => {
                                                                                                                                          setGorevler((prev) =>
                                                                                                                                                prev.map((g) =>
                                                                                                                                                        g.id === id
                                                                                                                                                                  ? {
                                                                                                                                                                                ...g,
                                                                                                                                                                                              baslik: duzenlenenBaslik,
                                                                                                                                                                                                            aciklama: duzenlenenAciklama,
                                                                                                                                                                                                                          kategori: duzenlenenKategori,
                                                                                                                                                                                                                                        oncelik: duzenlenenOncelik,
                                                                                                                                                                                                                                                      tarih: duzenlenenTarih,
                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                            : g
                                                                                                                                                                                                                                                                                  )
                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                          setDuzenlenenId(null);
                                                                                                                                                                                                                                                                                            };

                                                                                                                                                                                                                                                                                              return (
                                                                                                                                                                                                                                                                                                  <main style={{ padding: '2rem' }}>
                                                                                                                                                                                                                                                                                                        <h1>Görevlerim</h1>
                                                                                                                                                                                                                                                                                                              <ul>
                                                                                                                                                                                                                                                                                                                      {gorevler.map((g) => (
                                                                                                                                                                                                                                                                                                                                <li
                                                                                                                                                                                                                                                                                                                                            key={g.id}
                                                                                                                                                                                                                                                                                                                                                        style={{
                                                                                                                                                                                                                                                                                                                                                                      marginBottom: '16px',
                                                                                                                                                                                                                                                                                                                                                                                    padding: '16px',
                                                                                                                                                                                                                                                                                                                                                                                                  border: '1px solid #ccc',
                                                                                                                                                                                                                                                                                                                                                                                                                borderRadius: '8px',
                                                                                                                                                                                                                                                                                                                                                                                                                              backgroundColor: g.tamamlandi ? '#e0ffe0' : '#fff',
                                                                                                                                                                                                                                                                                                                                                                                                                                          }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                    >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                {duzenlenenId === g.id ? (
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <input
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                value={duzenlenenBaslik}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onChange={(e) => setDuzenlenenBaslik(e.target.value)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    onBlur={() => guncelle(g.id)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onKeyDown={(e) => e.key === 'Enter' && guncelle(g.id)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        autoFocus
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          style={{ width: '100%', fontWeight: 'bold' }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <textarea
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            value={duzenlenenAciklama}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onChange={(e) => setDuzenlenenAciklama(e.target.value)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                onBlur={() => guncelle(g.id)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  style={{ width: '100%', marginTop: '8px' }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <input
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    value={duzenlenenKategori}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onChange={(e) => setDuzenlenenKategori(e.target.value)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        placeholder="Kategori"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          style={{ width: '100%', marginTop: '8px' }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <select
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            value={duzenlenenOncelik}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onChange={(e) => setDuzenlenenOncelik(e.target.value as any)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style={{ width: '100%', marginTop: '8px' }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <option value="Düşük">Düşük</option>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <option value="Orta">Orta</option>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <option value="Yüksek">Yüksek</option>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </select>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <input
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        type="date"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          value={duzenlenenTarih}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            onChange={(e) => setDuzenlenenTarih(e.target.value)}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              style={{ width: '100%', marginTop: '8px' }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ) : (
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div onClick={() => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenId(g.id);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenBaslik(g.baslik);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenAciklama(g.aciklama);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenKategori(g.kategori);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenOncelik(g.oncelik);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setDuzenlenenTarih(g.tarih);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }}>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      style={{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          textDecoration: g.tamamlandi ? 'line-through' : 'none',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              fontWeight: 'bold',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  cursor: 'pointer',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    >
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      {g.baslik}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p>{g.aciklama}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p><strong>Kategori:</strong> {g.kategori}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p><strong>Öncelik:</strong> {g.oncelik}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p><strong>Tarih:</strong> {new Date(g.tarih).toLocaleDateString()}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                )}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onClick={() => gorevDurumDegistir(g.id)}>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          {g.tamamlandi ? 'Geri Al' : 'Tamamla'}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <button onClick={() => gorevSil(g.id)} style={{ marginLeft: '8px' }}>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Sil
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ))}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </main>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }